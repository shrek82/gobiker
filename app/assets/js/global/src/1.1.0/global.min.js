define(function(b,a,c){var e=b("lib");var d={};d.subNav=function(){$("#qyer_head_nav_item_yd").hover(function(){$(this).addClass("qyer_head_nav_item_current");
$(this).find(".qyer_head_subnav_bg").show();},function(){$(this).removeClass("qyer_head_nav_item_current");$(this).find(".qyer_head_subnav_bg").hide();
});};d.scroll_to_position=function(h,f,g){var g=g||500;$(h).click(function(){$("html,body").animate({scrollTop:$(h===f?this:f).offset().top},g);});};d.scrollToTop=function(){var p=$("<div class='ui_upward_wrapper' id='ui_gotop'><a class='arrow_icon'>回顶部</a></div>");
p.appendTo("body");var t=p.innerHeight();var q=$(document);var j=$(window);var s=$("div.qyer_footer");var i=s.height();var f=s.length;var m=q.width();var g=(m-980)/2+1040;
var r=10;var h,k,o,n,l;p.css({left:g,right:r});j.on("scroll",function(){h=q.height();k=j.height();o=k-t-30;l=q.scrollTop();if(f){n=h-i-l;o=k>n?n-t-30:o;
}if(l<200){p.fadeOut(250);}else{if(m>1200){p.css({right:"auto",top:o}).fadeIn(200);}else{p.css({left:"auto",top:o}).fadeIn(200);}}});p.click(function(){$("body,html").animate({scrollTop:0});
});};d.check_user=function(){$.ajax({url:"/users/check_user",dataType:"html",success:function(f){$("#asynclogininfo").html(f);}});};d.logged_button=function(i,h){var g=$("#"+i);
if(g.length){var f=function(){if(typeof h=="function"){try{h();}catch(j){}}else{if(g.attr("data-href")){window.location.href=g.attr("data-href");}else{return false;
}}};g.click(function(){if(!user.uid){d.plogin(f);}else{f();}});}};d.plogin=function(h){var g="";g+='<div class="reg_main">';g+='  <div class="clearfix"><strong class="fl f16 fontYaHei fb cGray">使用穷游帐号登录</strong><span class="fr cGray">没有帐号？<a id="tab_register_sw" href="javascript:void(0);">立即注册</a></span></div>';
g+='  <form method="post" action="/login" name="loginform" id="login_form">';g+='    <div class="login_form" style="margin-bottom:10px;">';g+='      <div class="list clearfix">';
g+='        <span class="fl">帐号：</span>';g+='        <input type="text" class="ui_input fl" name="login[account]" id="account" maxlength="40" placeholder="邮箱或用户名">';
g+="      </div>";g+='      <div class="list clearfix">';g+='        <span class="fl">密码：</span>';g+='        <input type="password" class="ui_input fl" autocomplete="off" maxlength="16" name="login[password]" id="password">';
g+="      </div>";g+='      <div class="list clearfix">';g+='        <label class="fl cGray"><input type="checkbox" checked="checked" id="tagpass" name="login[reme]" class="fl">记住我</label>';
g+='        <a target="_blank" href="getpass" class="fr">忘记密码？</a>';g+="      </div>";g+='      <div class="list clearfix">';g+='        <button type="submit" class="btn btn-mint" id="login_submit_button" style="width:80%;padding:8px 0;font-size:16px">立即登录</button>';
g+="      </div>";g+="    </div>";g+="  </form>";g+='  <div class="tc mt20">';g+='    <img src="http://static.qyer.com/images/login/login2/huo_icon.png" width="400" height="16" alt=""></div>';
g+='  <div class="clearfix mt15" style="color:#999"><strong>使用以下帐号直接登录</strong></div>';g+='  <div class="tc mt15">';g+='    <a href="javascript:void(0);" onfocus="this.blur();" class="weibo_btn _jsweibologin">微博登录</a>';
g+='    <a href="javascript:void(0);" onfocus="this.blur();" class="qq_btn _jsqqlogin">QQ登录</a>';g+="  </div>";g+='  <p id="synlogin"></p>';g+="</div>";
var f=new e.popup({title:"登陆"});f.html(g,"440",function(){setTimeout(function(){var i=$("#login_submit_button");i.prop("type","submit");$("#login_form").submit(function(j){j.preventDefault();
new e.ajaxForm($(this),{dataType:"json",submitButton:"login_submit_button",successLabel:"登录成功",sendingLabel:"验证中..",errorLabel:"重试登录",callback:function(l){if(l.uid&&l.username){user={uid:l.uid,username:l.username};
d.check_user();f.close();if(typeof h=="function"){try{h();}catch(k){}}}}}).send();});},500);});};d=(function(f){var g="js方法模式";f.log=function(){console.log(g);
};return f;})(d);d=(function(f){var g="js方法模式2";f.logs=function(){console.log(g);};return f;})(d);var d=(function(f){return f;})(d||{});d.loadComments=function(f){$.ajax({url:"/comments/list",dataType:"html",type:"get",data:f+"&_format=html",success:function(g){$("#cmt_loading").hide(10,function(){$("#ajax_list").html($(g).fadeIn(400));
});setTimeout(function(){d.cmtpage();},1200);}});};d.scroll_to_cmtform=function(){var g=$("#comment_form");var f=g.offset().top-32;$("html, body").animate({scrollTop:f},function(){});
};d.cmtpage=function(f){$("div.ui_page a").bind("click",function(g){g.preventDefault();$.ajax({url:$(this).attr("url"),dataType:"html",type:"get",success:function(i){var h=$("#ajax_list").offset().top-42;
$("html, body").animate({scrollTop:h});$("#ajax_list").html($(i).fadeIn(400));setTimeout(function(){d.cmtpage();},200);}});});};d.bindCmtForm=function(f){var f=f?f+"&":"";
d.logged_button("cmt_submit_button",function(){new e.ajaxForm($("#comment_form"),{dataType:"json",submitButton:"cmt_submit_button",successLabel:"发表成功",callback:function(g){ueditor.setContent("<p></p>");
$.ajax({url:"/comments/getone",dataType:"html",type:"get",data:f+"_format=html&id="+g.comment.id,success:function(i){$("#nodata_topic").remove();$li=$(i);
$("#cmts_pager").before($li);var h=$li.height()+"px";$li.css({opacity:0,height:0}).animate({opacity:1,height:h},600);}});}}).send();});};d.ueditor_config=b("./ueditor_config");
c.exports=d;});